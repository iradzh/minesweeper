(()=>{"use strict";function e(){const e=document.getElementById("dark_mode"),t=document.getElementById("stylesheet");e.checked?(t.href="./assets/dark.css",console.log("dark")):(t.href="./assets/light.css",console.log("light"))}let t,n=0,d=!1;function o(){if(!d){n++;const e=Math.floor(n/60).toString().padStart(2,"0"),t=(n%60).toString().padStart(2,"0");document.querySelector(".board__timer").innerText=`${e}:${t}`}}function c(){d=!0;const e=Math.floor(n/60).toString().padStart(2,"0"),t=(n%60).toString().padStart(2,"0");document.querySelector(".board__timer").innerText=`${e}:${t}`}function a(e,t,n){if(e<0||e>=n.size||t<0||t>=n.size)return;if(n.board[e][t].classList.contains("tile-clicked"))return;n.board[e][t].classList.add("tile-clicked");let d=0;d+=i(e-1,t-1,n),d+=i(e-1,t,n),d+=i(e-1,t+1,n),d+=i(e,t-1,n),d+=i(e,t+1,n),d+=i(e+1,t-1,n),d+=i(e+1,t,n),d+=i(e+1,t+1,n),d>0?(n.board[e][t].innerText=d,n.board[e][t].classList.add("x"+d.toString())):(a(e-1,t-1,n),a(e-1,t,n),a(e-1,t+1,n),a(e,t-1,n),a(e,t+1,n),a(e+1,t-1,n),a(e+1,t,n),a(e+1,t+1,n))}function i(e,t,n){return e<0||e>=n.size||t<0||t>=n.size?0:n.minesLocation.includes(e.toString()+"-"+t.toString())?1:0}function l(e){for(let t=0;t<e.size;t++)for(let n=0;n<e.size;n++){let d=e.board[t][n];e.minesLocation.includes(d.id)&&(d.innerText="💣",d.style.backgroundColor="#ec3e2a")}}let s=!1;function r(e){s||new Audio(e).play()}function u(){volumeButton.classList.contains("clicked")?(s=!1,volumeButton.innerText="mute 🔈",volumeButton.classList.remove("clicked")):(s=!0,volumeButton.innerText="unmute 🔈",volumeButton.classList.add("clicked"))}function m(e,i){if(e.gameOver||i.classList.contains("tile-clicked"))return;if(e.flagEnabled)return void(""==i.innerText&&e.flagCounter<e.minesCount?(e.flagCounter+=1,document.querySelector(".flag-counter").innerText="🚩 "+e.flagCounter,document.querySelector(".mines-left-counter").innerText="💣 "+(e.minesCount-e.flagCounter),r("./assets/sound/put-flag.mp4"),i.innerText="🚩"):"🚩"==i.innerText&&(e.flagCounter-=1,document.querySelector(".flag-counter").innerText="🚩 "+e.flagCounter,document.querySelector(".mines-left-counter").innerText="💣 "+(e.minesCount-e.flagCounter),i.innerText=""));if(e.isInitialised){if(e.minesLocation.includes(i.id))return void function(e){r("./assets/sound/mine.mp4"),c(),e.gameOver=!0,l(e),document.querySelector(".board__button__icon").src="assets/emoji/sad-face.png",p("Game Over! \n Start again")}(e)}else!function(e,t){let n=t.minesCount;for(;n>0;){let d=Math.floor(Math.random()*t.size),o=Math.floor(Math.random()*t.size),c=d.toString()+"-"+o.toString();t.minesLocation.includes(c)||e==c||(t.minesLocation.push(c),n-=1)}}(i.id,e),d=!1,t=setInterval(o,1e3),e.isInitialised=!0;r("./assets/sound/click-tile.mp4");let s=i.id.split("-"),u=parseInt(s[0]),m=parseInt(s[1]);e.tilesClicked+=1,document.querySelector(".board__clicks").innerText=e.tilesClicked,a(u,m,e),document.querySelectorAll(".tile-clicked").length==e.size*e.size-e.minesCount&&function(e){r("./assets/sound/win.mp4"),e.gameOver=!0,p(`Hooray! You found all mines \n in ${n} seconds and ${e.tilesClicked} moves!`),c(),l(e)}(e)}function p(e){document.querySelector(".end_message__text").innerText=e,document.querySelector(".end_message").style.display="block"}let b={board:[],size:10,minesCount:10,minesLocation:[],tilesClicked:0,flagEnabled:0,gameOver:!1,isInitialised:!1,flagCounter:0},g=document.createElement("div");g.classList.add("end_message");let f=document.createElement("div");f.classList.add("end_message__content"),g.appendChild(f);let _=document.createElement("p");_.classList.add("end_message__text"),f.appendChild(_);let h=document.createElement("span");function v(e){const t=e.target.value;C(parseInt(t))}function C(e){document.querySelector(".board__container").innerHTML="",b.board=[],document.getElementById("flag-button").addEventListener("click",y),b.size=e,function(e){for(let t=0;t<e.size;t++){let n=[];for(let d=0;d<e.size;d++){let o=document.createElement("div");o.classList.add("tile"),15===e.size?o.classList.add("tile-medium"):25===e.size&&o.classList.add("tile-hard"),o.id=t.toString()+"-"+d.toString(),o.addEventListener("click",(()=>{m(e,o)})),document.querySelector(".board__container").append(o),n.push(o)}e.board.push(n)}}(b)}function y(){b.flagEnabled?(b.flagEnabled=!1,document.getElementById("flag-button").style.backgroundColor="#f7f7f7"):(b.flagEnabled=!0,document.getElementById("flag-button").style.backgroundColor="#e0bdc5")}function E(){document.querySelector(".end_message").style.display="none",b.minesLocation=[],b.tilesClicked=0,b.flagCounter=0,document.querySelector(".flag-counter").innerText="🚩 "+b.flagCounter,b.gameOver=!1,b.isInitialised=!1,document.querySelector(".board__button__icon").src="assets/emoji/smile.png",clearInterval(t),n=0,document.querySelector(".board__timer").innerText="00:00",document.querySelector(".board__clicks").innerText="0",C(b.size)}h.classList.add("end_message__close"),h.innerHTML="&times;",h.addEventListener("click",(function(){document.querySelector(".end_message").style.display="none"})),f.appendChild(h),document.body.append(g),window.onload=function(){!function(e){const t=document.createElement("link");t.rel="icon",t.href="assets/emoji/favicon.png",document.head.appendChild(t)}(),function(){const t=document.createElement("h1");t.textContent="minesweeper",document.body.append(t);const n=document.createElement("div");n.classList.add("burger-container"),n.innerText="⚙️",document.body.append(n),n.addEventListener("click",(()=>{document.querySelector(".header").classList.toggle("header-active"),document.querySelector(".level_container").classList.toggle("level_container-active")}));const d=document.createElement("header");d.classList.add("header");const o=document.createElement("div"),c=document.createElement("input"),a=document.createElement("div");c.type="checkbox",c.id="dark_mode",c.classList.add("dark_mode_checkbox");const i=document.createElement("label");i.htmlFor="dark_mode",i.classList.add("dark_mode_label"),i.textContent="Dark Mode",o.appendChild(c),o.appendChild(i),d.appendChild(o),a.id="level-container",a.classList.add("level_container"),[{id:"easy",label:"Easy",value:"10",checked:!0},{id:"medium",label:"Medium",value:"15",checked:!1},{id:"hard",label:"Hard",value:"25",checked:!1}].forEach((e=>{const t=document.createElement("input");t.type="radio",t.id=e.id,t.name="level-group",t.value=e.value,t.checked=e.checked;const n=document.createElement("label");n.htmlFor=e.id,n.classList.add("level_label"),n.textContent=e.label,a.appendChild(t),a.appendChild(n)})),d.appendChild(a);const l=document.createElement("div");l.classList.add("bombs-container");const s=document.createElement("label");s.htmlFor="bombCount",s.textContent="Mines (10-99):";const r=document.createElement("input");r.type="range",r.id="bombCount",r.name="bombCount",r.min="10",r.max="99",r.value="10";const u=document.createElement("span");u.id="selectedValue",u.textContent="10",l.appendChild(s),l.appendChild(r),l.appendChild(u),d.appendChild(l);const m=document.createElement("button");m.id="volumeButton",m.classList.add("volume-button"),m.innerText="mute 🔈",d.appendChild(m);const p=document.createElement("div");p.classList.add("board__head");const b=document.createElement("div");b.classList.add("board__clicks__box");const g=document.createElement("p");g.innerText="0",g.classList.add("board__clicks"),b.appendChild(g),p.appendChild(b);const f=document.createElement("div");f.classList.add("board__button");const _=document.createElement("img");_.src="assets/emoji/smile.png",_.alt="board button",_.classList.add("board__button__icon"),f.appendChild(_),p.appendChild(f);const h=document.createElement("div");h.classList.add("board__timer__box");const v=document.createElement("p");v.innerText="00:00",v.classList.add("board__timer"),h.appendChild(v),p.appendChild(h),document.body.appendChild(d),document.body.appendChild(p),document.getElementById("dark_mode").addEventListener("change",e)}(),document.getElementById("level-container").addEventListener("change",v);const t=document.createElement("div");t.classList.add("board__container"),document.body.append(t);const n=document.createElement("div");n.classList.add("counters-container");const d=document.createElement("p");d.classList.add("flag-counter"),d.innerHTML="🚩 0",n.append(d);const o=document.createElement("p");o.classList.add("mines-left-counter"),o.innerText="💣 "+b.minesCount,n.append(o),document.body.append(n);const c=document.createElement("button");c.id="flag-button",c.innerText="🚩",document.body.append(c);let a=document.getElementById("selectedValue");document.getElementById("bombCount").addEventListener("input",(function(){a.textContent=document.getElementById("bombCount").value,b.minesCount=document.getElementById("bombCount").value,o.innerText=document.getElementById("bombCount").value})),document.querySelector(".board__button__icon").addEventListener("click",E),document.body.append(g),C(b.size),document.getElementById("volumeButton").addEventListener("click",u)}})();